<!--index.wxml-->
<!-- 自定义导航栏 -->
<view class="custom-nav-bar">
  <text class="nav-title">壁纸小程序</text>
</view>

<!-- 内容区域 -->
<view class="content-section">
  <!-- 分类区域 - 极简标签式导航设计 -->
  <view class="category-section" style="margin-top: {{categoryTop ? categoryTop + 'px' : '40rpx'}}">
    <view class="category-tabs">
      <view 
        wx:for="{{categories}}" 
        wx:key="id"
        class="category-tab {{item.active ? 'active' : ''}}"
        data-category="{{item.value}}"
        bindtap="onCategoryClick"
      >
        {{item.name}}
      </view>
    </view>
  </view>

  <!-- 壁纸网格 -->
  <view class="covers-section">
    <view class="covers-grid">
      <view 
        class="cover-item" 
        wx:for="{{wallpapers}}" 
        wx:key="id"
      >
        <view class="cover-image-container">
          <image class="cover-image" src="{{item.image}}" mode="aspectFit" bindtap="previewWallpaper" data-wallpaper="{{item}}" lazy-load="true"></image>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{wallpapers.length === 0}}">
      <text class="empty-icon">🖼️</text>
      <text class="empty-text">暂无壁纸</text>
      <text class="empty-desc">尝试切换分类</text>
    </view>
  </view>
</view>

<!-- 壁纸预览模态框 -->
<view class="wallpaper-preview-modal" wx:if="{{showPreview}}" catchtouchmove="preventTouchMove">
  <!-- 半透明黑色遮罩层 -->
  <view class="preview-mask" catchtouchmove="preventTouchMove"></view>
  
  <!-- 预览内容区域 -->
  <view class="preview-content" catchtouchmove="preventTouchMove">

    <!-- 预览界面返回容器 -->
    <view class="preview-return-navbar">
      <!-- 左边返回按钮 -->
      <view class="nav-button left-button" catchtap="onClosePreview">
        <text class="nav-icon">←</text>
      </view>
    </view>
    
    <!-- 壁纸展示区域 -->
    <view class="wallpaper-container">
      <view class="wallpaper-wrapper">
        <!-- 底部下载按钮 -->
        <view class="preview-footer">
          <button class="download-btn" bindtap="downloadWallpaper">
            <text class="download-icon">⬇️</text>
            <text class="download-text">立即下载</text>
          </button>
        </view>
        
        <image 
          class="wallpaper-image" 
          src="{{currentPreviewWallpaper.image}}" 
          mode="aspectFill"
        ></image>
      </view>
    </view>
  </view>
</view>