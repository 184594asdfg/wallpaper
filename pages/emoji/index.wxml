<!--emoji.wxml-->
<!-- 通用导航栏组件 -->
<common-navbar title="表情" bind:back="onBack"></common-navbar>

<!-- 内容区域 -->
<view class="content-section" style="padding-top: {{contentTop ? contentTop + 'px' : '40px'}};">
  <!-- 表情内容 -->
  <view class="emoji-content">
    <!-- 类型选择 -->
    <view class="type-section" style="top: {{typeSectionTop}}px;">
      <view class="type-tabs">
        <view 
          wx:for="{{types}}" 
          wx:key="id"
          class="category-tab {{currentType === item.id ? 'active' : ''}}"
          bindtap="onTypeClick"
          data-type="{{item.id}}"
        >
          {{item.name}}
        </view>
      </view>
    </view>
    
    <!-- 表情展示 -->
    <view class="emoji-section">
      <view class="emoji-grid">
        <view 
          class="emoji-item" 
          wx:for="{{emojis}}" 
          wx:key="id"
        >
          <image class="emoji-image" src="{{item.image}}" mode="aspectFill" bindtap="previewEmoji" data-emoji="{{item}}"></image>
        </view>
        
        <!-- 空状态 -->
        <view class="empty-state" wx:if="{{emojis.length === 0}}">
          <text class="empty-icon">😊</text>
          <text class="empty-text">暂无表情</text>
          <text class="empty-desc">请稍后重试</text>
        </view>
        
        <!-- 加载更多指示器 -->
        <view class="load-more-container" wx:if="{{loading && emojis.length > 0}}">
          <view class="loading-spinner"></view>
          <text class="loading-text">加载中...</text>
        </view>
        
        <!-- 没有更多数据提示 -->
        <view class="no-more-container" wx:if="{{!loading && page >= totalPages && emojis.length > 0}}">
          <text class="no-more-text">已经到底了</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- 表情预览组件 -->
<wallpaper-preview 
  showPreview="{{showPreview}}"
  currentPreviewWallpaper="{{currentPreviewEmoji}}"
  previewNavTop="{{previewNavTop}}"
  currentTime="{{currentTime}}"
  currentDate="{{currentDate}}"
  bind:closePreview="onClosePreview"
  bind:downloadWallpaper="downloadEmoji"
></wallpaper-preview>